<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>Product Details Â· MyEssantia</title>
  
  <!-- Font Awesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
  <!-- Premium Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&family=Plus+Jakarta+Sans:wght@200;300;400;500;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  
  <!-- Common CSS -->
  <link rel="stylesheet" href="common.css">
  <link rel="stylesheet" href="header.css">
  <link rel="stylesheet" href="footer.css">
  
  <style>
    /* -------------------- PRODUCT PAGE SPECIFIC STYLES -------------------- */
/* Breadcrumb */
.breadcrumb {
  display: flex;
  gap: 0.5rem;
  align-items: center;
  padding: 2rem 0 1rem;
  color: #999;
  font-size: 0.9rem;
  flex-wrap: wrap;
}

.breadcrumb a {
  color: #666;
  text-decoration: none;
  transition: color 0.2s;
}

.breadcrumb a:hover {
  color: #d4af37;
}

/* Main Product Container - Adjusted for better desktop proportions */
.product-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4rem;
  padding: 1rem 0 3rem;
  max-width: 1400px;
  margin: 0 auto;
}

/* Gallery Section - Better desktop sizing */
.gallery-section {
  position: sticky;
  top: 100px;
  height: fit-content;
  max-width: 550px;
  justify-self: end;
}

.main-image {
  width: 100%;
  aspect-ratio: 1;
  max-height: 500px;
  border-radius: 24px;
  overflow: hidden;
  margin-bottom: 1rem;
  background: #f4f2ef;
  box-shadow: 0 15px 25px -10px rgba(0,0,0,0.1);
  cursor: zoom-in;
}

.main-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s;
}

.main-image:hover img {
  transform: scale(1.03); /* Reduced zoom effect */
}

.thumbnail-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.8rem;
}

.thumbnail {
  aspect-ratio: 1;
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  border: 2px solid transparent;
  transition: all 0.2s;
  opacity: 0.7;
  box-shadow: 0 3px 8px -3px rgba(0,0,0,0.1);
}

.thumbnail:hover,
.thumbnail.active {
  border-color: #d4af37;
  opacity: 1;
  transform: translateY(-2px);
}

.thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Product Info Section - Desktop share button positioning */
.product-info {
  padding: 0.5rem 0;
  position: relative;
}

/* Desktop share button - positioned next to title */
@media (min-width: 769px) {
  .product-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .product-title {
    font-family: 'Playfair Display', serif;
    font-size: 2.5rem;
    font-weight: 500;
    line-height: 1.2;
    color: #1a1a1a;
    margin-bottom: 0;
    flex: 1;
  }

  .share-container {
    position: static;
    margin: 0;
    flex-shrink: 0;
  }

  .share-main-btn {
    background: white;
    border: 2px solid #f0f0f0;
    padding: 0.6rem 1.2rem;
    border-radius: 40px;
    display: inline-flex;
    align-items: center;
    gap: 0.6rem;
    font-size: 0.9rem;
    font-weight: 600;
    color: #4b5563;
    cursor: pointer;
    transition: all 0.3s;
  }

  .share-main-btn i {
    color: #d4af37;
    font-size: 1rem;
  }

  .share-main-btn:hover {
    border-color: #d4af37;
    background: #fef9e7;
    transform: translateY(-2px);
    box-shadow: 0 8px 15px -8px rgba(212, 175, 55, 0.3);
  }

  .share-menu {
    position: absolute;
    top: 100%;
    right: 0;
    left: auto;
    background: white;
    border-radius: 20px;
    box-shadow: 0 15px 30px -12px rgba(0,0,0,0.2);
    padding: 1rem;
    width: 320px;
    z-index: 100;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid #f0f0f0;
  }
}

.product-category {
  font-size: 0.8rem;
  text-transform: uppercase;
  color: #a2a2a2;
  letter-spacing: 1.5px;
  margin-bottom: 0.5rem;
}

.product-meta {
  display: flex;
  align-items: center;
  gap: 2rem;
  margin-bottom: 1.2rem;
  padding: 0.8rem 0;
  border-top: 1px solid #f0f0f0;
  border-bottom: 1px solid #f0f0f0;
  flex-wrap: wrap;
}

.product-brand {
  color: #666;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.product-brand i {
  color: #d4af37;
}

.rating-reviews {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  flex-wrap: wrap;
}

.stars {
  color: #d4af37;
  display: flex;
  gap: 2px;
  font-size: 1rem;
}

.rating-value {
  font-weight: 600;
  color: #333;
  font-size: 0.95rem;
}

.reviews-count {
  color: #999;
  font-size: 0.85rem;
}

/* Share Menu Styles (shared between desktop and mobile) */
.share-menu {
  position: absolute;
  top: 120%;
  left: 0;
  background: white;
  border-radius: 20px;
  box-shadow: 0 15px 30px -12px rgba(0,0,0,0.2);
  padding: 1rem;
  width: 320px;
  z-index: 100;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border: 1px solid #f0f0f0;
}

.share-menu.show {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.share-menu-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid #f0f0f0;
}

.share-menu-header span {
  font-weight: 600;
  color: #1e293b;
  font-size: 0.95rem;
}

.share-menu-header button {
  background: none;
  border: none;
  font-size: 1.1rem;
  cursor: pointer;
  color: #999;
  transition: color 0.2s;
}

.share-menu-header button:hover {
  color: #d4af37;
}

.share-options {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.6rem;
  margin-bottom: 1rem;
}

.share-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.3rem;
  padding: 0.6rem 0.3rem;
  border: none;
  background: #f8fafc;
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.7rem;
  color: #4b5563;
}

.share-option i {
  font-size: 1.1rem;
}

.share-option.facebook:hover {
  background: #1877f2;
  color: white;
  transform: translateY(-2px);
}

.share-option.twitter:hover {
  background: #000000;
  color: white;
  transform: translateY(-2px);
}

.share-option.whatsapp:hover {
  background: #25d366;
  color: white;
  transform: translateY(-2px);
}

.share-option.telegram:hover {
  background: #0088cc;
  color: white;
  transform: translateY(-2px);
}

.share-option.email:hover {
  background: #ea4335;
  color: white;
  transform: translateY(-2px);
}

.share-option.pinterest:hover {
  background: #bd081c;
  color: white;
  transform: translateY(-2px);
}

.share-link-container {
  background: #f8fafc;
  padding: 0.8rem;
  border-radius: 14px;
}

.share-link-label {
  font-size: 0.75rem;
  color: #64748b;
  margin-bottom: 0.4rem;
}

.share-link-box {
  display: flex;
  gap: 0.4rem;
}

.share-link-box input {
  flex: 1;
  padding: 0.6rem;
  border: 2px solid #e2e8f0;
  border-radius: 10px;
  font-size: 0.8rem;
  color: #1e293b;
  background: white;
}

.share-link-box input:focus {
  outline: none;
  border-color: #d4af37;
}

.copy-link-btn {
  padding: 0.6rem 1rem;
  background: #d4af37;
  border: none;
  border-radius: 10px;
  color: white;
  font-weight: 600;
  font-size: 0.8rem;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 0.3rem;
}

.copy-link-btn:hover {
  background: #c4a030;
  transform: translateY(-2px);
  box-shadow: 0 5px 12px rgba(212, 175, 55, 0.3);
}

.copy-link-btn.copied {
  background: #22c55e;
}

/* Price Section */
.price-section {
  margin-bottom: 1.5rem;
  background: linear-gradient(135deg, #faf8f5 0%, #ffffff 100%);
  padding: 1.2rem;
  border-radius: 18px;
  border: 1px solid #f0f0f0;
}

.current-price {
  font-size: 2.5rem;
  font-weight: 700;
  color: #d4af37;
  font-family: 'Montserrat', sans-serif;
  line-height: 1;
}

.inr-symbol {
  font-size: 1.8rem;
  font-weight: 500;
}

.original-price {
  font-size: 1.1rem;
  color: #999;
  text-decoration: line-through;
  margin-left: 0.8rem;
}

.discount-badge {
  display: inline-block;
  background: linear-gradient(135deg, #22c55e, #16a34a);
  color: white;
  padding: 0.2rem 0.8rem;
  border-radius: 30px;
  font-size: 0.8rem;
  font-weight: 600;
  margin-left: 0.8rem;
}

.stock-status {
  display: inline-block;
  padding: 0.3rem 1rem;
  border-radius: 30px;
  font-size: 0.8rem;
  font-weight: 600;
  margin-top: 0.8rem;
}

.in-stock {
  background: #e3f1e3;
  color: #166534;
}

.low-stock {
  background: #fff3cd;
  color: #856404;
}

.out-of-stock {
  background: #fee2e2;
  color: #991b1b;
}

/* High Demand Badge */
.high-demand-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.3rem;
  background: linear-gradient(135deg, #ff6b6b, #ff4757);
  color: white;
  padding: 0.3rem 1rem;
  border-radius: 30px;
  font-size: 0.8rem;
  font-weight: 600;
  margin-left: 0.8rem;
  box-shadow: 0 4px 10px rgba(255, 75, 75, 0.3);
}

.high-demand-badge i {
  font-size: 0.9rem;
}

/* Free Delivery Card */
.delivery-card {
  background: linear-gradient(135deg, #f0f7ff 0%, #e6f0fa 100%);
  border-radius: 18px;
  padding: 1.2rem;
  margin: 1.5rem 0;
  border: 1px solid #c2d9f0;
  position: relative;
  overflow: hidden;
}

.delivery-card::before {
  content: 'ðŸšš';
  position: absolute;
  right: -15px;
  bottom: -15px;
  font-size: 6rem;
  opacity: 0.1;
  transform: rotate(-15deg);
}

.delivery-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  position: relative;
  z-index: 1;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.delivery-title {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  font-weight: 600;
  color: #1e3a8a;
  font-size: 0.95rem;
}

.delivery-title i {
  color: #2563eb;
  font-size: 1.3rem;
}

.delivery-threshold {
  background: #2563eb;
  color: white;
  padding: 0.2rem 1rem;
  border-radius: 30px;
  font-size: 0.8rem;
  font-weight: 600;
}

.progress-container {
  position: relative;
  z-index: 1;
}

.progress-bar {
  width: 100%;
  height: 10px;
  background: rgba(255,255,255,0.5);
  border-radius: 20px;
  overflow: hidden;
  margin: 0.8rem 0;
  border: 1px solid #c2d9f0;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #2563eb, #3b82f6);
  width: 0%;
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 20px;
  position: relative;
}

.delivery-message {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  font-size: 0.9rem;
  color: #1e3a8a;
  padding: 0.3rem 0;
}

.delivery-message i {
  font-size: 1.1rem;
}

.delivery-message.eligible i {
  color: #16a34a;
}

.delivery-message.not-eligible i {
  color: #2563eb;
}

.cart-value {
  font-weight: 700;
  color: #2563eb;
}

/* Quantity Selector */
.quantity-section {
  margin: 1.5rem 0;
  background: #f8fafc;
  padding: 1.2rem;
  border-radius: 18px;
  border: 1px solid #e2e8f0;
}

.quantity-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 600;
  color: #334155;
  margin-bottom: 1rem;
  font-size: 0.95rem;
}

.quantity-label i {
  color: #d4af37;
}

.quantity-controls {
  display: flex;
  align-items: center;
  gap: 0.8rem;
}

.quantity-btn {
  width: 40px;
  height: 40px;
  border: 2px solid #e2e8f0;
  background: white;
  border-radius: 12px;
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #334155;
  font-weight: 600;
}

.quantity-btn:hover:not(:disabled) {
  background: #d4af37;
  border-color: #d4af37;
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 5px 12px rgba(212, 175, 55, 0.3);
}

.quantity-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background: #f1f5f9;
}

.quantity-input {
  width: 80px;
  height: 40px;
  border: 2px solid #e2e8f0;
  border-radius: 12px;
  text-align: center;
  font-size: 1.1rem;
  font-weight: 600;
  background: white;
  color: #1a1a1a;
}

.stock-info {
  margin-top: 0.8rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #64748b;
  font-size: 0.85rem;
}

.stock-info i {
  color: #d4af37;
}

/* Action Buttons */
.action-buttons {
  display: flex;
  gap: 1rem;
  margin: 1.5rem 0;
}

.btn {
  flex: 1;
  padding: 1rem;
  border: none;
  border-radius: 50px;
  font-weight: 600;
  font-size: 0.95rem;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
}

.btn-add-to-cart {
  background: #1e293b;
  color: white;
  box-shadow: 0 8px 16px -8px #1e293b;
}

.btn-add-to-cart:hover {
  background: #d4af37;
  color: #1a1a1a;
  transform: translateY(-2px);
  box-shadow: 0 12px 24px -10px #d4af37;
}

.btn-buy-now {
  background: #d4af37;
  color: #1a1a1a;
  box-shadow: 0 8px 16px -8px #d4af37;
}

.btn-buy-now:hover {
  background: #c4a030;
  transform: translateY(-2px);
  box-shadow: 0 12px 24px -10px #c4a030;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* Product Highlights */
.product-highlights {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.8rem;
  margin: 1.5rem 0;
}

.highlight-card {
  background: #ffffff;
  padding: 1rem;
  border-radius: 14px;
  border: 1px solid #f0f0f0;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  transition: all 0.3s;
}

.highlight-card:hover {
  border-color: #d4af37;
  transform: translateY(-2px);
  box-shadow: 0 8px 16px -8px rgba(0,0,0,0.1);
}

.highlight-icon {
  width: 40px;
  height: 40px;
  background: #fef9e7;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #d4af37;
  font-size: 1.2rem;
}

.highlight-text h4 {
  font-weight: 600;
  font-size: 0.9rem;
  margin-bottom: 0.1rem;
  color: #1a1a1a;
}

.highlight-text p {
  font-size: 0.8rem;
  color: #666;
}

/* Product Details Tabs - Improved scrolling */
.product-details-tabs {
  margin-top: 2.5rem;
  background: white;
  border-radius: 24px;
  padding: 1.5rem;
  box-shadow: 0 4px 16px rgba(0,0,0,0.02);
  border: 1px solid #f0f0f0;
}

.tab-headers {
  display: flex;
  gap: 1.5rem;
  border-bottom: 2px solid #f0f0f0;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: #d4af37 #f0f0f0;
  padding-bottom: 2px;
}

.tab-headers::-webkit-scrollbar {
  height: 4px;
}

.tab-headers::-webkit-scrollbar-track {
  background: #f0f0f0;
  border-radius: 4px;
}

.tab-headers::-webkit-scrollbar-thumb {
  background: #d4af37;
  border-radius: 4px;
}

.tab-headers::-webkit-scrollbar-thumb:hover {
  background: #c4a030;
}

.tab-header {
  padding: 0.8rem 0;
  cursor: pointer;
  font-weight: 500;
  color: #666;
  position: relative;
  transition: color 0.2s;
  font-size: 0.95rem;
  white-space: nowrap;
}

.tab-header:hover {
  color: #d4af37;
}

.tab-header.active {
  color: #d4af37;
}

.tab-header.active::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 2px;
  background: #d4af37;
}

.tab-content {
  padding: 1.5rem 0 0.5rem;
  display: none;
  animation: fadeIn 0.5s ease;
  line-height: 1.7;
  color: #4b5563;
  font-size: 0.95rem;
}

.tab-content.active {
  display: block;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.specs-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

.spec-item {
  padding: 0.8rem;
  background: #f8fafc;
  border-radius: 10px;
}

.spec-label {
  font-size: 0.8rem;
  color: #64748b;
  margin-bottom: 0.2rem;
}

.spec-value {
  font-weight: 600;
  color: #1e293b;
  font-size: 0.9rem;
}

/* Easy Return Policy */
.return-section {
  margin: 2.5rem 0;
  background: linear-gradient(135deg, #fefce8 0%, #fffbeb 100%);
  border-radius: 24px;
  padding: 1.5rem;
  border: 1px solid #fde68a;
}

.return-header {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  margin-bottom: 1.5rem;
}

.return-header i {
  font-size: 2rem;
  color: #d97706;
}

.return-header h3 {
  font-size: 1.5rem;
  font-weight: 500;
  color: #92400e;
}

.return-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1.2rem;
  margin-bottom: 1.2rem;
}

.return-card {
  background: white;
  border-radius: 18px;
  padding: 1.2rem;
  text-align: center;
  border: 1px solid #fde68a;
  transition: all 0.3s;
}

.return-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px -10px rgba(217, 119, 6, 0.2);
}

.return-icon {
  width: 60px;
  height: 60px;
  background: #fef3c7;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 0.8rem;
  color: #d97706;
  font-size: 1.8rem;
}

.return-card h4 {
  font-weight: 600;
  margin-bottom: 0.4rem;
  color: #92400e;
  font-size: 1rem;
}

.return-card p {
  color: #b45309;
  font-size: 0.85rem;
  line-height: 1.4;
}

.return-note {
  margin-top: 1.2rem;
  padding: 1rem;
  background: #fef3c7;
  border-radius: 12px;
  color: #92400e;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  border-left: 4px solid #d97706;
}

.return-note i {
  font-size: 1.3rem;
  color: #d97706;
}

/* You May Also Like Section */
.related-section {
  margin: 4rem 0;
  padding: 2rem 0;
  background: linear-gradient(180deg, #ffffff 0%, #faf8f5 100%);
  border-radius: 40px;
}

.related-title {
  font-family: 'Playfair Display', serif;
  font-size: 2rem;
  margin-bottom: 2rem;
  text-align: center;
  position: relative;
  color: #1a1a1a;
}

.related-title::after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 2px;
  background: linear-gradient(90deg, transparent, #d4af37, transparent);
}

.related-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1.5rem;
  padding: 0.5rem;
}

.related-card {
  text-decoration: none;
  color: inherit;
  background: white;
  border-radius: 20px;
  padding: 1rem;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  border: 1px solid #f0f0f0;
  text-align: center;
  position: relative;
  overflow: visible;
}

.related-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #d4af37, #f5d742);
  transform: translateX(-100%);
  transition: transform 0.4s;
}

.related-card:hover::before {
  transform: translateX(0);
}

.related-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 16px 24px -10px rgba(212, 175, 55, 0.2);
  border-color: #d4af37;
}

.related-image {
  width: 100%;
  aspect-ratio: 1;
  border-radius: 16px;
  overflow: hidden;
  margin-bottom: 1rem;
  background: #f4f2ef;
}

.related-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s;
}

.related-card:hover .related-image img {
  transform: scale(1.05); /* Reduced zoom effect */
}

.related-category {
  font-size: 0.65rem;
  color: #a2a2a2;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  margin-bottom: 0.2rem;
}

.related-title-small {
  font-weight: 600;
  font-size: 0.9rem;
  margin-bottom: 0.4rem;
  color: #1e293b;
  line-height: 1.3;
}

.related-rating {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.1rem;
  margin-bottom: 0.4rem;
  color: #d4af37;
  font-size: 0.75rem;
}

.related-price {
  color: #d4af37;
  font-weight: 700;
  font-size: 1.1rem;
  font-family: 'Montserrat', sans-serif;
}

.related-price .inr-symbol {
  font-size: 0.9rem;
}

.quick-add {
  margin-top: 0.8rem;
  padding: 0.4rem;
  background: #f8f6f2;
  border-radius: 30px;
  font-size: 0.75rem;
  color: #666;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.3rem;
  transition: all 0.3s;
}

.related-card:hover .quick-add {
  background: #d4af37;
  color: white;
}

/* Related Product Share Button */
.related-share {
  position: absolute;
  top: 0.8rem;
  right: 0.8rem;
  width: 28px;
  height: 28px;
  background: rgba(255,255,255,0.9);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s;
  opacity: 0;
  transform: translateY(-5px);
  backdrop-filter: blur(5px);
  border: 1px solid rgba(212, 175, 55, 0.3);
  color: #d4af37;
  z-index: 5;
}

.related-card:hover .related-share {
  opacity: 1;
  transform: translateY(0);
}

.related-share:hover {
  background: #d4af37;
  color: white;
  transform: scale(1.1) !important;
  box-shadow: 0 4px 10px rgba(212, 175, 55, 0.3);
}

/* New Priority Access Modal Styles */
.priority-modal {
  display: none;
  position: fixed;
  z-index: 1100;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(5px);
  animation: fadeInBg 0.3s ease;
}

@keyframes fadeInBg {
  from { opacity: 0; }
  to { opacity: 1; }
}

.priority-modal.show {
  display: flex;
  align-items: center;
  justify-content: center;
}

.priority-modal-content {
  background: white;
  border-radius: 30px;
  width: 90%;
  max-width: 450px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.priority-modal-close {
  position: absolute;
  top: 1.2rem;
  right: 1.2rem;
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: #999;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.2s;
  z-index: 10;
}

.priority-modal-close:hover {
  background: #f0f0f0;
  color: #d4af37;
  transform: rotate(90deg);
}

.priority-modal-header {
  padding: 1.8rem 1.8rem 0.8rem;
  text-align: center;
}

.priority-product-image {
  width: 80px;
  height: 80px;
  border-radius: 16px;
  margin: 0 auto 0.8rem;
  overflow: hidden;
  border: 3px solid #f4f2ef;
  box-shadow: 0 8px 16px -8px rgba(0,0,0,0.2);
}

.priority-product-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.priority-product-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.1rem;
  font-weight: 500;
  color: #1a1a1a;
  margin-bottom: 0.4rem;
  padding: 0 1rem;
}

.priority-message {
  background: #fef9e7;
  padding: 0.8rem 1.2rem;
  border-radius: 16px;
  margin: 0 1.5rem 1.2rem;
  border-left: 4px solid #d4af37;
  text-align: center;
  color: #5f4b1f;
  font-size: 0.9rem;
  line-height: 1.5;
}

.priority-form {
  padding: 0 1.8rem 1.8rem;
}

.form-group {
  margin-bottom: 1.2rem;
}

.form-label {
  display: block;
  margin-bottom: 0.4rem;
  font-weight: 600;
  color: #334155;
  font-size: 0.85rem;
}

.form-label i {
  color: #d4af37;
  margin-right: 0.3rem;
}

.form-input {
  width: 100%;
  padding: 0.8rem 1rem;
  border: 2px solid #e2e8f0;
  border-radius: 14px;
  font-size: 0.95rem;
  transition: all 0.2s;
  background: white;
}

.form-input:focus {
  outline: none;
  border-color: #d4af37;
  box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
}

.form-input.error {
  border-color: #ef4444;
  background: #fef2f2;
}

.error-message {
  color: #ef4444;
  font-size: 0.75rem;
  margin-top: 0.2rem;
  display: none;
}

.error-message.show {
  display: block;
}

.priority-submit-btn {
  width: 100%;
  padding: 1rem;
  background: linear-gradient(135deg, #d4af37, #c4a030);
  border: none;
  border-radius: 50px;
  color: white;
  font-weight: 600;
  font-size: 0.95rem;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  margin-top: 1.5rem;
}

.priority-submit-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 12px 24px -10px #d4af37;
  background: linear-gradient(135deg, #c4a030, #b18a2a);
}

.priority-submit-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.priority-success {
  text-align: center;
  padding: 2rem;
  animation: fadeIn 0.5s ease;
}

.priority-success i {
  font-size: 3.5rem;
  color: #22c55e;
  margin-bottom: 0.8rem;
}

.priority-success h3 {
  font-size: 1.3rem;
  color: #1e293b;
  margin-bottom: 0.4rem;
}

.priority-success p {
  color: #64748b;
  font-size: 0.95rem;
}

/* Cart Notification */
.cart-notification {
  position: fixed;
  top: 20px;
  right: 20px;
  background: #22c55e;
  color: white;
  padding: 1rem 1.5rem;
  border-radius: 50px;
  box-shadow: 0 10px 25px rgba(34, 197, 94, 0.3);
  z-index: 1000;
  animation: slideInRight 0.3s ease, fadeOut 0.3s ease 2.7s;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  font-weight: 500;
}

.cart-notification i {
  font-size: 1.2rem;
}

.cart-notification button {
  background: white;
  border: none;
  color: #22c55e;
  padding: 0.3rem 1rem;
  border-radius: 30px;
  font-weight: 600;
  cursor: pointer;
  margin-left: 0.5rem;
  transition: all 0.2s;
}

.cart-notification button:hover {
  transform: scale(1.05);
}

@keyframes slideInRight {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

body.modal-open {
  overflow: hidden;
}

/* Responsive */
@media (max-width: 1200px) {
  .product-container {
    gap: 3rem;
  }
  
  .product-title {
    font-size: 2.2rem;
  }
}

@media (max-width: 1024px) {
  .related-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .specs-grid {
    grid-template-columns: 1fr;
  }
  
  .product-container {
    gap: 2rem;
  }
  
  .gallery-section {
    max-width: 450px;
  }
}

@media (max-width: 768px) {
  .product-container {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  .gallery-section {
    position: static;
    max-width: 100%;
  }

  .main-image {
    max-height: 400px;
  }

  .main-image:hover img {
    transform: scale(1.02); /* Reduced mobile zoom */
  }

  /* Mobile share button positioning */
  .product-info {
    position: relative;
  }

  .product-title {
    font-size: 1.8rem;
    padding-right: 3.5rem;
    margin-bottom: 0.5rem;
  }

  .share-container {
    position: absolute;
    top: 0.5rem;
    right: 0;
    margin: 0;
    z-index: 10;
  }

  .share-main-btn {
    padding: 0.5rem 1rem;
    background: #f8f6f2;
    border-color: #e0e0e0;
  }

  .share-main-btn span {
    display: none;
  }

  .share-main-btn i {
    font-size: 1.2rem;
    margin: 0;
  }

  .share-menu {
    position: fixed;
    top: auto;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    max-width: 100%;
    border-radius: 30px 30px 0 0;
    transform: translateY(100%);
    padding-bottom: 1.5rem;
  }
  
  .share-menu.show {
    transform: translateY(0);
  }
  
  .share-options {
    grid-template-columns: repeat(3, 1fr);
  }

  .tab-headers {
    gap: 1rem;
  }

  .tab-header {
    font-size: 0.9rem;
    padding: 0.6rem 0;
  }

  .action-buttons {
    flex-direction: column;
  }

  .return-grid {
    grid-template-columns: 1fr;
  }

  .product-highlights {
    grid-template-columns: 1fr;
  }
  
  .quantity-controls {
    justify-content: center;
  }
  
  .related-share {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (max-width: 480px) {
  .container { 
    padding: 0 1rem; 
  }
  
  .related-grid { 
    grid-template-columns: 1fr; 
  }
  
  .delivery-header { 
    flex-direction: column; 
    align-items: flex-start; 
  }
  
  .product-meta { 
    flex-direction: column; 
    align-items: flex-start; 
    gap: 0.5rem; 
  }

  .product-title {
    font-size: 1.5rem;
    padding-right: 3rem;
  }

  .share-main-btn {
    padding: 0.4rem 0.8rem;
  }

  .tab-headers {
    gap: 0.8rem;
  }

  .tab-header {
    font-size: 0.8rem;
    padding: 0.5rem 0;
  }
  
  .current-price {
    font-size: 2rem;
  }
  
  .inr-symbol {
    font-size: 1.4rem;
  }
}
  </style>
</head>
<body class="bg-noise">
  <!-- Header loaded dynamically -->
  <div id="header"></div>

  <main>
    <div class="container">
      <div class="breadcrumb">
        <a href="index.html">Home</a>
        <i class="fa-solid fa-chevron-right"></i>
        <a href="collection.html">Collection</a>
        <i class="fa-solid fa-chevron-right"></i>
        <span id="breadcrumb-product">Product</span>
      </div>
    </div>

    <div class="container" id="product-container"></div>
  </main>

  <!-- Footer loaded dynamically -->
  <div id="footer"></div>

  <!-- Common Modals -->
  <div id="common-modals"></div>

  <!-- New Priority Access Modal -->
  <div id="priority-modal" class="priority-modal">
    <div class="priority-modal-content" id="priority-modal-content">
      <button class="priority-modal-close" id="close-priority-modal">&times;</button>
      <div id="priority-modal-body"></div>
    </div>
  </div>

  <!-- Common JavaScript -->
  <script src="common.js"></script>

<script>
  // ========== HOME PAGE SPECIFIC FUNCTIONS ==========
let scrollTimeout;
let products = []; // Global products array

function renderProducts() {
  const gridContainer = document.getElementById('product-grid-container');
  if (!gridContainer) return;

  // Use the global products array from common.js (loaded from Firebase)
  const homeProducts = products.filter(p => p.showOnHome === true);

  if (homeProducts.length === 0) {
    gridContainer.innerHTML = `
      <div style="grid-column: 1/-1; text-align: center; padding: 4rem; color: #999;">
        <i class="fa-solid fa-box-open" style="font-size: 4rem; margin-bottom: 1rem;"></i>
        <h3>No products on homepage</h3>
        <p>Check back later for new arrivals!</p>
      </div>
    `;
    return;
  }

  let gridHtml = '';
  homeProducts.forEach((product, index) => {
    const mainImage = product.images && product.images[0] ? product.images[0] : (product.primaryImg || 'https://via.placeholder.com/300');
    const secondImage = product.images && product.images[1] ? product.images[1] : (product.secondaryImg || mainImage);
    
    gridHtml += `
      <a href="product.html?id=${product.id}" class="product-card" data-product-id="${product.id}" style="animation-delay: ${index * 0.1}s">
        <div class="image-frame">
          <div class="primary-img" style="background-image: url('${mainImage}');"></div>
          <div class="secondary-img" style="background-image: url('${secondImage}');"></div>
          <div class="image-actions" onclick="event.preventDefault(); event.stopPropagation();">
            <button class="img-add" onclick="window.addToCart('${product.id}'); event.preventDefault(); event.stopPropagation();">
              <i class="fa-solid fa-cart-plus"></i> add
            </button>
            <button class="img-buy" onclick="window.buyNow('${product.id}'); event.preventDefault(); event.stopPropagation();">
              <i class="fa-solid fa-bolt"></i> buy
            </button>
          </div>
        </div>
        <h3 class="product-title">${product.title}</h3>
        <p class="product-category">${product.category}</p>
        <div class="product-rating">${renderRating(product.rating)}</div>
        <div class="product-price">
          <span class="inr-symbol">â‚¹</span>${formatPrice(product.price)}
        </div>
        ${getStockStatus(product.stock)}
      </a>
    `;
  });
  
  gridContainer.innerHTML = gridHtml;
  
  // Add hover effect listeners for product images
  addProductHoverEffects();
}

// Function to add hover effects for product images
function addProductHoverEffects() {
  const productCards = document.querySelectorAll('.product-card');
  
  productCards.forEach(card => {
    const imageFrame = card.querySelector('.image-frame');
    const primaryImg = card.querySelector('.primary-img');
    const secondaryImg = card.querySelector('.secondary-img');
    
    if (!imageFrame || !primaryImg || !secondaryImg) return;
    
    // Remove any existing listeners
    card.removeEventListener('mouseenter', handleProductMouseEnter);
    card.removeEventListener('mouseleave', handleProductMouseLeave);
    
    // Add new listeners
    card.addEventListener('mouseenter', handleProductMouseEnter);
    card.addEventListener('mouseleave', handleProductMouseLeave);
  });
}

// Product hover enter handler
function handleProductMouseEnter(e) {
  const card = e.currentTarget;
  const imageFrame = card.querySelector('.image-frame');
  const primaryImg = card.querySelector('.primary-img');
  const secondaryImg = card.querySelector('.secondary-img');
  
  if (imageFrame && primaryImg && secondaryImg) {
    // Smooth transition for image swap
    primaryImg.style.opacity = '0';
    secondaryImg.style.opacity = '1';
    
    // Add subtle scale effect to the image frame
    imageFrame.style.transform = 'scale(1.02)';
  }
}

// Product hover leave handler
function handleProductMouseLeave(e) {
  const card = e.currentTarget;
  const imageFrame = card.querySelector('.image-frame');
  const primaryImg = card.querySelector('.primary-img');
  const secondaryImg = card.querySelector('.secondary-img');
  
  if (imageFrame && primaryImg && secondaryImg) {
    // Reset to primary image
    primaryImg.style.opacity = '1';
    secondaryImg.style.opacity = '0';
    
    // Reset scale effect
    imageFrame.style.transform = 'scale(1)';
  }
}

function renderRating(rating) {
  if (!rating) return '<span>No ratings</span>';
  const fullStars = Math.floor(rating);
  const halfStar = rating % 1 >= 0.5;
  const emptyStars = 5 - Math.ceil(rating);
  
  let stars = '';
  for (let i = 0; i < fullStars; i++) stars += '<i class="fa-solid fa-star"></i>';
  if (halfStar) stars += '<i class="fa-solid fa-star-half-alt"></i>';
  for (let i = 0; i < emptyStars; i++) stars += '<i class="fa-regular fa-star"></i>';
  
  return stars + `<span>(${rating.toFixed(1)})</span>`;
}

function formatPrice(price) {
  return price ? price.toLocaleString('en-IN') : '0';
}

function getStockStatus(stock) {
  if (stock > 10) return '<div class="stock-badge in-stock"><i class="fa-solid fa-check-circle"></i> In Stock</div>';
  if (stock > 0) return '<div class="stock-badge low-stock"><i class="fa-solid fa-exclamation-circle"></i> Low Stock</div>';
  return '<div class="stock-badge out-of-stock"><i class="fa-solid fa-times-circle"></i> Out of Stock</div>';
}

// Scroll to products function
function scrollToProducts() {
  const productsSection = document.getElementById('products-section');
  if (productsSection) {
    productsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}

// Set active navigation
function setActiveNav() {
  // Set Home as active
  const homeLinks = document.querySelectorAll('.nav-link[href="index.html"]');
  homeLinks.forEach(link => {
    link.classList.add('active');
  });
  
  // Remove active from others
  const otherLinks = document.querySelectorAll('.nav-link:not([href="index.html"])');
  otherLinks.forEach(link => {
    link.classList.remove('active');
  });
}

// Scroll to top button visibility and button reset
function handleScroll() {
  const scrollTop = document.getElementById('scrollTop');
  if (scrollTop) {
    if (window.scrollY > 300) {
      scrollTop.classList.add('visible');
    } else {
      scrollTop.classList.remove('visible');
    }
  }
  
  // Reset button states after scrolling
  clearTimeout(scrollTimeout);
  
  // Add scrolling class to prevent animation sticking
  const buttons = document.querySelectorAll('.hero-buttons .btn, .view-all-link');
  buttons.forEach(button => {
    button.classList.add('scrolling');
    
    // Force remove any hover styles
    button.style.transform = '';
    button.style.boxShadow = '';
    button.style.backgroundColor = '';
    button.style.color = '';
  });
  
  scrollTimeout = setTimeout(() => {
    buttons.forEach(button => {
      button.classList.remove('scrolling');
      // Force a reflow to ensure normal state
      void button.offsetHeight;
    });
  }, 100);
}

// Parallax effect on scroll
function handleParallax() {
  const heroBg = document.querySelector('.hero-bg');
  if (heroBg) {
    const scrolled = window.scrollY;
    heroBg.style.transform = `scale(1.1) translateY(${scrolled * 0.1}px)`;
  }
}

// Add ripple effect to button
function createRipple(event, button) {
  const ripple = document.createElement('span');
  ripple.classList.add('ripple');
  
  const rect = button.getBoundingClientRect();
  const size = Math.max(rect.width, rect.height);
  
  ripple.style.width = ripple.style.height = `${size}px`;
  ripple.style.left = `${event.clientX - rect.left - size/2}px`;
  ripple.style.top = `${event.clientY - rect.top - size/2}px`;
  
  button.appendChild(ripple);
  
  setTimeout(() => {
    ripple.remove();
  }, 600);
}

// Update cart count (to be implemented based on your cart system)
function updateCartCount() {
  // Implement your cart count logic here
  console.log('Cart count updated');
}

// Load common components (header, footer)
async function loadComponents() {
  try {
    // Load header
    const headerResponse = await fetch('header.html');
    const headerData = await headerResponse.text();
    document.getElementById('header').innerHTML = headerData;
    
    // Load footer
    const footerResponse = await fetch('footer.html');
    const footerData = await footerResponse.text();
    document.getElementById('footer').innerHTML = footerData;
    
    // Set active nav after components are loaded
    setTimeout(setActiveNav, 100);
  } catch (error) {
    console.error('Error loading components:', error);
  }
}

// Load common modals
async function loadCommonModals() {
  try {
    const response = await fetch('common.html');
    const data = await response.text();
    document.getElementById('common-modals').innerHTML = data;
  } catch (error) {
    console.error('Error loading common modals:', error);
  }
}

// Initialize everything
function initializeApp() {
  // Products are already loaded from Firebase in common.js
  renderProducts();
  updateCartCount();
  
  // Set active navigation
  setActiveNav();
  
  // Add click handler for start shopping button with ripple effect
  const startShoppingBtn = document.getElementById('startShoppingBtn');
  if (startShoppingBtn) {
    // Remove any existing listeners
    const newStartShoppingBtn = startShoppingBtn.cloneNode(true);
    startShoppingBtn.parentNode.replaceChild(newStartShoppingBtn, startShoppingBtn);
    
    newStartShoppingBtn.addEventListener('click', (e) => {
      e.preventDefault();
      
      // Add ripple effect
      createRipple(e, newStartShoppingBtn);
      
      // Ensure button returns to normal after click
      newStartShoppingBtn.style.transform = 'translateY(-1px) scale(1.02)';
      
      setTimeout(() => {
        newStartShoppingBtn.style.transform = '';
        newStartShoppingBtn.style.boxShadow = '';
        scrollToProducts();
      }, 150);
      
      setTimeout(() => {
        newStartShoppingBtn.style.transition = '';
      }, 300);
    });
  }
  
  // Add hover effect handlers for view all link
  const viewAllLink = document.querySelector('.view-all-link');
  if (viewAllLink) {
    viewAllLink.addEventListener('mouseenter', () => {
      if (!viewAllLink.classList.contains('scrolling')) {
        viewAllLink.style.transform = 'translateX(8px)';
        viewAllLink.style.color = '#d4af37';
      }
    });
    
    viewAllLink.addEventListener('mouseleave', () => {
      viewAllLink.style.transform = '';
      viewAllLink.style.color = '';
    });
  }
  
  // Add scroll event listeners
  window.addEventListener('scroll', handleScroll, { passive: true });
  window.addEventListener('scroll', handleParallax, { passive: true });
  
  // Animate value items on scroll
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, { threshold: 0.1, rootMargin: '50px' });

  document.querySelectorAll('.value-item').forEach(item => {
    item.style.opacity = '0';
    item.style.transform = 'translateY(20px)';
    item.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
    observer.observe(item);
  });
  
  // Add transition end handler for all buttons
  const buttons = document.querySelectorAll('.hero-buttons .btn, .view-all-link');
  buttons.forEach(button => {
    button.addEventListener('transitionend', () => {
      if (!button.matches(':hover') && !button.classList.contains('scrolling')) {
        button.style.transform = '';
        button.style.boxShadow = '';
        button.style.backgroundColor = '';
        button.style.color = '';
      }
    });
    
    // Ensure button resets on mouse leave
    button.addEventListener('mouseleave', () => {
      if (!button.classList.contains('scrolling')) {
        button.style.transform = '';
        button.style.boxShadow = '';
        button.style.backgroundColor = '';
        button.style.color = '';
      }
    });
  });
  
  // Add scroll to top button click handler
  const scrollTopBtn = document.getElementById('scrollTop');
  if (scrollTopBtn) {
    scrollTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  }
}

// Document ready handler
document.addEventListener('DOMContentLoaded', () => {
  loadCommonModals();
  loadComponents();
  
  // Initialize after a short delay to ensure components are loaded
  setTimeout(initializeApp, 500);
});

// Window load handler for fallback
window.addEventListener('load', () => {
  // If products array is empty but we have cached products, use them as fallback
  if (products.length === 0) {
    const cachedProducts = localStorage.getItem('MyEssantia_products');
    if (cachedProducts) {
      try {
        products = JSON.parse(cachedProducts);
        renderProducts();
      } catch (e) {
        console.error('Error parsing cached products:', e);
      }
    }
  }
  
  // Re-initialize to ensure everything is set up
  setTimeout(() => {
    setActiveNav();
    initializeApp();
  }, 200);
});

// Clean up event listeners on page unload
window.addEventListener('beforeunload', () => {
  window.removeEventListener('scroll', handleScroll);
  window.removeEventListener('scroll', handleParallax);
});

// Export functions for global use
window.addToCart = function(productId) {
  console.log('Add to cart:', productId);
  // Implement your add to cart logic here
};

window.buyNow = function(productId) {
  console.log('Buy now:', productId);
  // Implement your buy now logic here
};

window.scrollToProducts = scrollToProducts;
  </script>
</body>
</html>
