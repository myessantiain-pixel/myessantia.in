<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>Product · MyEssantia</title>
  
  <!-- Font Awesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
  <!-- Modern Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
  
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  
  <style>
    /* ========== FRESH MODERN DESIGN SYSTEM ========== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      /* Clean, Modern Color Palette */
      --primary: #2563eb;        /* Vibrant blue */
      --primary-dark: #1d4ed8;
      --primary-light: #dbeafe;
      --primary-soft: #eff6ff;
      
      --secondary: #10b981;      /* Fresh green */
      --secondary-light: #d1fae5;
      
      --accent: #8b5cf6;          /* Purple accent */
      --accent-light: #ede9fe;
      
      --dark: #0f172a;            /* Slate dark */
      --gray-800: #1e293b;
      --gray-600: #475569;
      --gray-400: #94a3b8;
      --gray-200: #e2e8f0;
      --gray-100: #f1f5f9;
      --gray-50: #f8fafc;
      
      --bg: #ffffff;
      --surface: #f8fafc;
      --card: #ffffff;
      
      --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
      --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
      
      --radius-xs: 4px;
      --radius-sm: 6px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-xl: 16px;
      --radius-2xl: 20px;
      --radius-3xl: 24px;
      --radius-full: 9999px;
      
      --spacing-1: 4px;
      --spacing-2: 8px;
      --spacing-3: 12px;
      --spacing-4: 16px;
      --spacing-5: 20px;
      --spacing-6: 24px;
      --spacing-8: 32px;
      --spacing-10: 40px;
      --spacing-12: 48px;
      --spacing-16: 64px;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--dark);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
    }

    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 var(--spacing-6);
    }

    /* ========== BREADCRUMB ========== */
    .breadcrumb {
      display: flex;
      gap: var(--spacing-2);
      align-items: center;
      padding: var(--spacing-6) 0 var(--spacing-4);
      color: var(--gray-400);
      font-size: 0.9rem;
      font-weight: 500;
    }

    .breadcrumb a {
      color: var(--gray-600);
      text-decoration: none;
      transition: color 0.2s;
    }

    .breadcrumb a:hover {
      color: var(--primary);
    }

    .breadcrumb i {
      font-size: 0.7rem;
      color: var(--gray-400);
    }

    /* ========== MAIN GRID ========== */
    .product-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-12);
      padding: var(--spacing-4) 0 var(--spacing-12);
    }

    /* ========== GALLERY ========== */
    .gallery {
      position: sticky;
      top: var(--spacing-6);
      height: fit-content;
    }

    .main-image {
      width: 100%;
      aspect-ratio: 1;
      border-radius: var(--radius-2xl);
      overflow: hidden;
      background: var(--surface);
      margin-bottom: var(--spacing-4);
      border: 1px solid var(--gray-200);
    }

    .main-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .main-image:hover img {
      transform: scale(1.02);
    }

    .thumbnail-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--spacing-3);
    }

    .thumbnail {
      aspect-ratio: 1;
      border-radius: var(--radius-lg);
      overflow: hidden;
      cursor: pointer;
      border: 2px solid transparent;
      transition: all 0.2s;
      background: var(--surface);
    }

    .thumbnail:hover,
    .thumbnail.active {
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* ========== PRODUCT INFO ========== */
    .product-info {
      padding: var(--spacing-2) 0;
    }

    /* Social Proof Strip */
    .social-strip {
      display: flex;
      gap: var(--spacing-4);
      margin-bottom: var(--spacing-6);
      flex-wrap: wrap;
    }

    .sold-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-2);
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
      padding: var(--spacing-2) var(--spacing-4);
      border-radius: var(--radius-full);
      font-size: 0.9rem;
      font-weight: 600;
      box-shadow: var(--shadow-md);
    }

    .live-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-2);
      background: linear-gradient(135deg, var(--secondary), #059669);
      color: white;
      padding: var(--spacing-2) var(--spacing-4);
      border-radius: var(--radius-full);
      font-size: 0.9rem;
      font-weight: 600;
      box-shadow: var(--shadow-md);
      animation: pulse 2s infinite;
    }

    .live-badge i {
      font-size: 0.6rem;
      color: #fff;
      animation: blink 1.5s infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
      100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
    }

    @keyframes blink {
      0% { opacity: 1; }
      50% { opacity: 0.3; }
      100% { opacity: 1; }
    }

    .product-category {
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--primary);
      margin-bottom: var(--spacing-2);
    }

    .product-title {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 3.2rem;
      font-weight: 700;
      line-height: 1.1;
      color: var(--dark);
      margin-bottom: var(--spacing-4);
      letter-spacing: -0.02em;
    }

    .rating-row {
      display: flex;
      align-items: center;
      gap: var(--spacing-4);
      margin-bottom: var(--spacing-6);
    }

    .stars {
      display: flex;
      gap: 2px;
      color: #fbbf24;
      font-size: 1rem;
    }

    .rating-value {
      font-weight: 600;
      color: var(--dark);
    }

    .reviews-count {
      color: var(--gray-400);
      font-size: 0.9rem;
    }

    /* Share Button */
    .share-wrapper {
      position: relative;
      display: inline-block;
    }

    .share-btn {
      background: var(--surface);
      border: 1px solid var(--gray-200);
      padding: var(--spacing-3) var(--spacing-5);
      border-radius: var(--radius-full);
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-2);
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--gray-600);
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: var(--spacing-6);
    }

    .share-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: var(--primary-soft);
    }

    .share-menu {
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      background: white;
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-xl);
      padding: var(--spacing-4);
      width: 300px;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      border: 1px solid var(--gray-200);
    }

    .share-menu.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .share-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--spacing-2);
      margin-bottom: var(--spacing-4);
    }

    .share-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: var(--spacing-3);
      border-radius: var(--radius-md);
      background: var(--gray-50);
      border: none;
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--gray-600);
      cursor: pointer;
      transition: all 0.2s;
    }

    .share-option i {
      font-size: 1.2rem;
    }

    .share-option:hover {
      background: var(--primary);
      color: white;
    }

    .copy-link {
      display: flex;
      gap: 4px;
    }

    .copy-link input {
      flex: 1;
      padding: var(--spacing-2) var(--spacing-3);
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-md);
      font-size: 0.8rem;
    }

    .copy-btn {
      padding: var(--spacing-2) var(--spacing-3);
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 0.8rem;
      cursor: pointer;
    }

    /* Price Card */
    .price-card {
      background: var(--surface);
      border-radius: var(--radius-2xl);
      padding: var(--spacing-6);
      margin-bottom: var(--spacing-6);
      border: 1px solid var(--gray-200);
    }

    .price-header {
      display: flex;
      align-items: baseline;
      gap: var(--spacing-4);
      margin-bottom: var(--spacing-4);
    }

    .current-price {
      font-size: 3rem;
      font-weight: 700;
      color: var(--dark);
      font-family: 'Space Grotesk', sans-serif;
      line-height: 1;
    }

    .original-price {
      font-size: 1.5rem;
      color: var(--gray-400);
      text-decoration: line-through;
    }

    .discount {
      background: var(--secondary-light);
      color: var(--secondary);
      padding: 4px 12px;
      border-radius: var(--radius-full);
      font-weight: 600;
      font-size: 0.9rem;
    }

    .price-options {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-3);
      margin-bottom: var(--spacing-4);
    }

    .price-option {
      padding: var(--spacing-4);
      border-radius: var(--radius-lg);
      text-align: center;
    }

    .price-option.prepaid {
      background: var(--primary-soft);
      border: 1px solid var(--primary-light);
    }

    .price-option.cod {
      background: var(--gray-100);
      border: 1px solid var(--gray-200);
    }

    .option-label {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--gray-600);
      margin-bottom: 4px;
    }

    .option-price {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--dark);
      font-family: 'Space Grotesk', sans-serif;
    }

    .option-note {
      font-size: 0.7rem;
      color: var(--gray-400);
      margin-top: 4px;
    }

    .stock-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: var(--spacing-2) var(--spacing-4);
      background: var(--gray-100);
      border-radius: var(--radius-full);
      font-size: 0.9rem;
      font-weight: 600;
    }

    .stock-badge.in-stock {
      color: var(--secondary);
    }

    .stock-badge.low-stock {
      color: #f97316;
    }

    /* Money Back Promise */
    .promise-card {
      background: linear-gradient(135deg, #1e293b, #0f172a);
      color: white;
      padding: var(--spacing-6);
      border-radius: var(--radius-2xl);
      margin-bottom: var(--spacing-6);
      display: flex;
      align-items: center;
      gap: var(--spacing-4);
      position: relative;
      overflow: hidden;
    }

    .promise-icon {
      width: 64px;
      height: 64px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: var(--primary-light);
    }

    .promise-content h4 {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .promise-content p {
      color: var(--gray-400);
      font-size: 0.9rem;
    }

    .promise-highlight {
      color: var(--primary-light);
      font-weight: 700;
    }

    /* Delivery Card */
    .delivery-card {
      background: var(--surface);
      border-radius: var(--radius-2xl);
      padding: var(--spacing-6);
      margin-bottom: var(--spacing-6);
      border: 1px solid var(--gray-200);
    }

    .delivery-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-4);
    }

    .delivery-title {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      font-weight: 600;
      color: var(--dark);
    }

    .delivery-title i {
      color: var(--primary);
    }

    .delivery-min {
      background: var(--gray-100);
      padding: 4px 12px;
      border-radius: var(--radius-full);
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--gray-600);
    }

    .progress-container {
      margin: var(--spacing-4) 0;
    }

    .progress-bar {
      height: 8px;
      background: var(--gray-200);
      border-radius: var(--radius-full);
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      width: 0%;
      transition: width 0.3s ease;
      border-radius: var(--radius-full);
    }

    .delivery-message {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      margin-top: var(--spacing-3);
      font-size: 0.95rem;
      font-weight: 500;
    }

    .delivery-message i {
      color: var(--primary);
    }

    .delivery-message.eligible i {
      color: var(--secondary);
    }

    .cart-value {
      font-weight: 700;
      color: var(--primary);
    }

    /* Features Grid */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-3);
      margin-bottom: var(--spacing-6);
    }

    .feature-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
      padding: var(--spacing-3);
      background: var(--gray-50);
      border-radius: var(--radius-lg);
    }

    .feature-icon {
      width: 40px;
      height: 40px;
      background: white;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      box-shadow: var(--shadow-xs);
    }

    .feature-text h4 {
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 2px;
    }

    .feature-text p {
      font-size: 0.8rem;
      color: var(--gray-600);
    }

    /* Quantity */
    .quantity-wrapper {
      background: var(--surface);
      border-radius: var(--radius-2xl);
      padding: var(--spacing-6);
      margin-bottom: var(--spacing-6);
      border: 1px solid var(--gray-200);
    }

    .quantity-label {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      font-weight: 600;
      margin-bottom: var(--spacing-4);
    }

    .quantity-label i {
      color: var(--primary);
    }

    .quantity-controls {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
    }

    .qty-btn {
      width: 48px;
      height: 48px;
      border: 1px solid var(--gray-200);
      background: white;
      border-radius: var(--radius-md);
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--dark);
      cursor: pointer;
      transition: all 0.2s;
    }

    .qty-btn:hover:not(:disabled) {
      background: var(--primary);
      border-color: var(--primary);
      color: white;
    }

    .qty-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .qty-input {
      width: 80px;
      height: 48px;
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-md);
      text-align: center;
      font-size: 1.2rem;
      font-weight: 600;
      background: white;
    }

    /* Action Buttons */
    .action-buttons {
      display: flex;
      gap: var(--spacing-4);
      margin-bottom: var(--spacing-6);
    }

    .btn {
      flex: 1;
      padding: var(--spacing-4);
      border: none;
      border-radius: var(--radius-full);
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-2);
    }

    .btn-primary {
      background: var(--primary);
      color: white;
      box-shadow: var(--shadow-md);
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .btn-secondary {
      background: white;
      color: var(--dark);
      border: 1px solid var(--gray-200);
    }

    .btn-secondary:hover {
      border-color: var(--primary);
      background: var(--primary-soft);
      transform: translateY(-2px);
    }

    /* Tabs */
    .tabs {
      background: var(--surface);
      border-radius: var(--radius-2xl);
      padding: var(--spacing-6);
      margin-bottom: var(--spacing-6);
      border: 1px solid var(--gray-200);
    }

    .tab-headers {
      display: flex;
      gap: var(--spacing-6);
      border-bottom: 1px solid var(--gray-200);
      margin-bottom: var(--spacing-6);
    }

    .tab-header {
      padding: var(--spacing-3) 0;
      cursor: pointer;
      font-weight: 600;
      color: var(--gray-400);
      position: relative;
      transition: color 0.2s;
    }

    .tab-header:hover {
      color: var(--primary);
    }

    .tab-header.active {
      color: var(--primary);
    }

    .tab-header.active::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      width: 100%;
      height: 2px;
      background: var(--primary);
    }

    .tab-content {
      display: none;
      line-height: 1.7;
      color: var(--gray-600);
    }

    .tab-content.active {
      display: block;
    }

    .specs-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-4);
    }

    .spec-item {
      padding: var(--spacing-3);
      background: var(--gray-50);
      border-radius: var(--radius-lg);
    }

    .spec-label {
      font-size: 0.8rem;
      color: var(--gray-400);
      margin-bottom: 4px;
    }

    .spec-value {
      font-weight: 600;
      color: var(--dark);
    }

    .video-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-3);
    }

    .video-item {
      aspect-ratio: 16/9;
      border-radius: var(--radius-lg);
      overflow: hidden;
      position: relative;
      cursor: pointer;
    }

    .video-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .video-item i {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40px;
      height: 40px;
      background: rgba(0,0,0,0.6);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }

    .video-duration {
      position: absolute;
      bottom: 8px;
      right: 8px;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 2px 8px;
      border-radius: var(--radius-full);
      font-size: 0.7rem;
    }

    /* Reviews */
    .reviews-section {
      background: var(--surface);
      border-radius: var(--radius-2xl);
      padding: var(--spacing-6);
      margin-bottom: var(--spacing-6);
      border: 1px solid var(--gray-200);
    }

    .reviews-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--spacing-6);
    }

    .reviews-title {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .reviews-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-4);
      margin-bottom: var(--spacing-6);
    }

    .review-card {
      padding: var(--spacing-4);
      background: var(--gray-50);
      border-radius: var(--radius-lg);
    }

    .reviewer {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
      margin-bottom: var(--spacing-3);
    }

    .reviewer-avatar {
      width: 40px;
      height: 40px;
      background: var(--primary-light);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: var(--primary);
    }

    .reviewer-info h5 {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .reviewer-info span {
      font-size: 0.8rem;
      color: var(--gray-400);
    }

    .review-rating {
      color: #fbbf24;
      font-size: 0.8rem;
      margin-bottom: var(--spacing-2);
    }

    .review-text {
      font-size: 0.9rem;
      color: var(--gray-600);
      margin-bottom: var(--spacing-3);
    }

    .review-helpful {
      display: flex;
      gap: var(--spacing-4);
      font-size: 0.8rem;
      color: var(--gray-400);
    }

    .view-all {
      text-align: center;
      padding: var(--spacing-3);
      background: var(--gray-50);
      border-radius: var(--radius-full);
      font-weight: 600;
      color: var(--primary);
      cursor: pointer;
      transition: all 0.2s;
    }

    .view-all:hover {
      background: var(--primary-soft);
    }

    /* Related Products */
    .related {
      margin-top: var(--spacing-12);
      padding-top: var(--spacing-8);
      border-top: 1px solid var(--gray-200);
    }

    .related-title {
      font-size: 1.8rem;
      font-weight: 700;
      font-family: 'Space Grotesk', sans-serif;
      margin-bottom: var(--spacing-6);
    }

    .related-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--spacing-4);
    }

    .related-card {
      text-decoration: none;
      color: inherit;
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--spacing-4);
      border: 1px solid var(--gray-200);
      transition: all 0.2s;
    }

    .related-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary);
    }

    .related-image {
      aspect-ratio: 1;
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-bottom: var(--spacing-3);
      background: var(--gray-100);
    }

    .related-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .related-category {
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--primary);
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .related-name {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .related-price {
      font-weight: 700;
      color: var(--dark);
      font-size: 1.2rem;
      margin-bottom: var(--spacing-2);
    }

    .related-add {
      padding: var(--spacing-2);
      background: var(--gray-50);
      border-radius: var(--radius-full);
      text-align: center;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--gray-600);
      transition: all 0.2s;
    }

    .related-card:hover .related-add {
      background: var(--primary);
      color: white;
    }

    /* Notification */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      border-radius: var(--radius-full);
      padding: var(--spacing-3) var(--spacing-6);
      box-shadow: var(--shadow-xl);
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
      font-weight: 500;
      z-index: 1000;
      animation: slideIn 0.3s ease;
      border: 1px solid var(--gray-200);
    }

    .notification i {
      color: var(--secondary);
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .product-grid { gap: var(--spacing-8); }
      .product-title { font-size: 2.5rem; }
      .related-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 768px) {
      .product-grid { grid-template-columns: 1fr; gap: var(--spacing-6); }
      .gallery { position: static; }
      .product-title { font-size: 2rem; }
      .reviews-grid { grid-template-columns: 1fr; }
      .video-grid { grid-template-columns: 1fr; }
      .action-buttons { flex-direction: column; }
      .price-options { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div id="header"></div>

  <main>
    <div class="container">
      <div class="breadcrumb">
        <a href="index.html">Home</a>
        <i class="fa-solid fa-chevron-right"></i>
        <a href="collection.html">Collection</a>
        <i class="fa-solid fa-chevron-right"></i>
        <span id="breadcrumb-product">Loading...</span>
      </div>
    </div>

    <div class="container" id="product-container"></div>
  </main>

  <div id="footer"></div>

  <script>
    // ========== FIREBASE CONFIG ==========
    const firebaseConfig = {
      apiKey: "AIzaSyD16uGnm1vodkbqGoFSdFdJjGFSLpJmflk",
      authDomain: "myessantia.firebaseapp.com",
      projectId: "myessantia",
      storageBucket: "myessantia.firebasestorage.app",
      messagingSenderId: "701726517205",
      appId: "1:701726517205:web:f6ab79efdffeab6dbbbf5c"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ========== GLOBAL ==========
    let currentProduct = null;
    let cart = JSON.parse(localStorage.getItem('myessantia_cart')) || [];

    // Generate random values
    function getRandomSold() {
      return Math.floor(Math.random() * (1500 - 300 + 1)) + 300;
    }

    function getRandomViewers() {
      return Math.floor(Math.random() * (30 - 5 + 1)) + 5;
    }

    function generateReviews() {
      const users = [
        { name: 'Priya Sharma', city: 'Mumbai', avatar: 'P' },
        { name: 'Rahul Verma', city: 'Delhi', avatar: 'R' },
        { name: 'Ananya Patel', city: 'Bangalore', avatar: 'A' },
        { name: 'Karthik Iyer', city: 'Chennai', avatar: 'K' },
        { name: 'Neha Gupta', city: 'Pune', avatar: 'N' },
        { name: 'Arjun Singh', city: 'Hyderabad', avatar: 'A' }
      ];
      
      const comments = [
        "Absolutely love this! Quality is amazing and delivery was super fast.",
        "Perfect product, exceeded my expectations. Worth every penny!",
        "Great quality and beautiful design. My friends keep asking where I got it.",
        "Exactly as described. The material is premium and it looks even better in person.",
        "Excellent customer service and quick shipping. Very happy with purchase.",
        "The attention to detail is impressive. Definitely buying more from this brand."
      ];
      
      return users.map((user, i) => ({
        ...user,
        comment: comments[i % comments.length],
        rating: (4 + Math.random()).toFixed(1),
        time: Math.floor(Math.random() * 48) + 1,
        helpful: Math.floor(Math.random() * 30) + 10
      }));
    }

    function getProductId() {
      return new URLSearchParams(window.location.search).get('id');
    }

    async function loadProduct() {
      const productId = getProductId();
      if (!productId) return showNotFound();

      try {
        const doc = await db.collection('products').doc(productId).get();
        if (!doc.exists) return showNotFound();

        currentProduct = { id: doc.id, ...doc.data() };
        document.getElementById('breadcrumb-product').textContent = currentProduct.title;
        renderProduct(currentProduct);
        loadRelated(currentProduct);
      } catch (error) {
        console.error(error);
        showNotFound();
      }
    }

    function showNotFound() {
      document.getElementById('product-container').innerHTML = `
        <div style="text-align: center; padding: 80px 20px; background: var(--surface); border-radius: 32px;">
          <i class="fa-solid fa-box-open" style="font-size: 64px; color: var(--gray-400);"></i>
          <h2 style="font-size: 2rem; margin: 20px 0;">Product Not Found</h2>
          <p style="color: var(--gray-600);">The product you're looking for doesn't exist.</p>
          <a href="collection.html" style="display: inline-block; margin-top: 30px; padding: 12px 32px; background: var(--primary); color: white; text-decoration: none; border-radius: 999px; font-weight: 600;">Browse Collection</a>
        </div>
      `;
    }

    function renderProduct(product) {
      const images = [];
      if (product.media?.images) images.push(...product.media.images.map(i => i.url));
      if (images.length === 0) images.push(product.primaryImg || 'https://images.unsplash.com/photo-1578500494198-246f612d3b3d?w=600');

      const stock = product.stock || 10;
      const originalPrice = Math.round(product.price * 1.2);
      const discount = Math.round(((originalPrice - product.price) / originalPrice) * 100);
      const prepaidPrice = Math.round(product.price * 0.95);
      const codPrice = Math.round(product.price * 1.02);
      
      const quantity = 1;
      const soldCount = getRandomSold();
      const liveViewers = getRandomViewers();
      const reviews = generateReviews();

      const container = document.getElementById('product-container');
      container.innerHTML = `
        <div class="product-grid">
          <!-- Gallery -->
          <div class="gallery">
            <div class="main-image">
              <img src="${images[0]}" alt="${product.title}" id="mainImage">
            </div>
            <div class="thumbnail-grid">
              ${images.map((img, i) => `
                <div class="thumbnail ${i === 0 ? 'active' : ''}" onclick="changeImage('${img}', this)">
                  <img src="${img}" alt="thumb">
                </div>
              `).join('')}
            </div>
          </div>

          <!-- Product Info -->
          <div class="product-info">
            <!-- Social Strip -->
            <div class="social-strip">
              <span class="sold-badge">
                <i class="fa-solid fa-fire"></i> ${soldCount}+ sold last month
              </span>
              <span class="live-badge">
                <i class="fa-solid fa-circle"></i> ${liveViewers} viewing now
              </span>
            </div>

            <div class="product-category">${product.category || 'ACCESSORIES'}</div>
            <h1 class="product-title">${product.title}</h1>

            <!-- Rating -->
            <div class="rating-row">
              <div class="stars">
                ${getStars(product.rating)}
              </div>
              <span class="rating-value">${(product.rating || 4.5).toFixed(1)}</span>
              <span class="reviews-count">(128 reviews)</span>
              
              <!-- Share -->
              <div class="share-wrapper" style="margin-left: auto;">
                <button class="share-btn" onclick="toggleShare(event)">
                  <i class="fa-solid fa-share-alt"></i> Share
                </button>
                <div class="share-menu" id="shareMenu">
                  <div class="share-grid">
                    <button class="share-option" onclick="share('facebook')"><i class="fa-brands fa-facebook-f"></i>FB</button>
                    <button class="share-option" onclick="share('twitter')"><i class="fa-brands fa-x-twitter"></i>TW</button>
                    <button class="share-option" onclick="share('whatsapp')"><i class="fa-brands fa-whatsapp"></i>WA</button>
                    <button class="share-option" onclick="share('telegram')"><i class="fa-brands fa-telegram"></i>TG</button>
                    <button class="share-option" onclick="share('email')"><i class="fa-regular fa-envelope"></i>Mail</button>
                    <button class="share-option" onclick="share('pinterest')"><i class="fa-brands fa-pinterest"></i>Pin</button>
                  </div>
                  <div class="copy-link">
                    <input type="text" id="shareLink" value="${window.location.href}" readonly>
                    <button class="copy-btn" onclick="copyLink()">Copy</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Price Card -->
            <div class="price-card">
              <div class="price-header">
                <span class="current-price">₹${product.price.toFixed(2)}</span>
                <span class="original-price">₹${originalPrice.toFixed(2)}</span>
                <span class="discount">${discount}% OFF</span>
              </div>
              
              <div class="price-options">
                <div class="price-option prepaid">
                  <div class="option-label">PREPAID</div>
                  <div class="option-price">₹${prepaidPrice}</div>
                  <div class="option-note">Save ₹${product.price - prepaidPrice}</div>
                </div>
                <div class="price-option cod">
                  <div class="option-label">CASH ON DELIVERY</div>
                  <div class="option-price">₹${codPrice}</div>
                  <div class="option-note">+₹${codPrice - product.price} fee</div>
                </div>
              </div>

              <span class="stock-badge ${stock > 10 ? 'in-stock' : 'low-stock'}">
                <i class="fa-solid ${stock > 10 ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
                ${stock > 10 ? 'In Stock' : `Only ${stock} left`}
              </span>
            </div>

            <!-- Money Back Promise -->
            <div class="promise-card">
              <div class="promise-icon">
                <i class="fa-solid fa-shield"></i>
              </div>
              <div class="promise-content">
                <h4>Razorpay Money Back Promise</h4>
                <p><span class="promise-highlight">100% refund</span> on non-delivery or defects</p>
              </div>
            </div>

            <!-- Delivery Card -->
            <div class="delivery-card" id="deliveryCard">
              <div class="delivery-header">
                <span class="delivery-title">
                  <i class="fa-solid fa-truck"></i> Free Delivery
                </span>
                <span class="delivery-min">Min. ₹1,299</span>
              </div>
              
              <div class="progress-container">
                <div class="progress-bar">
                  <div class="progress-fill" id="deliveryProgress" style="width: ${Math.min(100, (product.price / 1299) * 100)}%"></div>
                </div>
              </div>
              
              <div class="delivery-message" id="deliveryMessage">
                <i class="fa-solid ${product.price >= 1299 ? 'fa-circle-check' : 'fa-circle-info'}"></i>
                <span id="deliveryText">
                  ${product.price >= 1299 
                    ? 'You get FREE delivery!' 
                    : `Add <span class="cart-value">₹${(1299 - product.price).toFixed(2)}</span> more`}
                </span>
              </div>
            </div>

            <!-- Features -->
            <div class="features-grid">
              <div class="feature-item">
                <div class="feature-icon"><i class="fa-solid fa-truck-fast"></i></div>
                <div>
                  <h4>Free Shipping</h4>
                  <p>Above ₹1,299</p>
                </div>
              </div>
              <div class="feature-item">
                <div class="feature-icon"><i class="fa-solid fa-rotate-left"></i></div>
                <div>
                  <h4>Easy Returns</h4>
                  <p>48 hours</p>
                </div>
              </div>
            </div>

            <!-- Quantity -->
            <div class="quantity-wrapper">
              <div class="quantity-label">
                <i class="fa-solid fa-cubes"></i> Quantity
              </div>
              <div class="quantity-controls">
                <button class="qty-btn" onclick="updateQuantity(-1)" ${stock === 0 ? 'disabled' : ''}>−</button>
                <input type="text" class="qty-input" id="productQuantity" value="1" readonly>
                <button class="qty-btn" onclick="updateQuantity(1)" ${stock === 0 ? 'disabled' : ''}>+</button>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button class="btn btn-secondary" onclick="addToCart()" ${stock === 0 ? 'disabled' : ''}>
                <i class="fa-solid fa-cart-plus"></i> Add to Cart
              </button>
              <button class="btn btn-primary" onclick="buyNow()" ${stock === 0 ? 'disabled' : ''}>
                <i class="fa-solid fa-bolt"></i> Buy Now
              </button>
            </div>

            <!-- Tabs -->
            <div class="tabs">
              <div class="tab-headers">
                <div class="tab-header active" onclick="switchTab('desc')">Description</div>
                <div class="tab-header" onclick="switchTab('specs')">Specs</div>
                <div class="tab-header" onclick="switchTab('videos')">Videos</div>
              </div>
              <div class="tab-content active" id="tab-desc">
                <p>${product.description || product.shortDesc || 'Premium quality product from MyEssantia.'}</p>
              </div>
              <div class="tab-content" id="tab-specs">
                <div class="specs-grid">
                  <div class="spec-item">
                    <div class="spec-label">Material</div>
                    <div class="spec-value">Premium Quality</div>
                  </div>
                  <div class="spec-item">
                    <div class="spec-label">Brand</div>
                    <div class="spec-value">${product.brand || 'MyEssantia'}</div>
                  </div>
                </div>
              </div>
              <div class="tab-content" id="tab-videos">
                <div class="video-grid">
                  <div class="video-item">
                    <img src="https://images.unsplash.com/photo-1578500494198-246f612d3b3d?w=400" alt="video">
                    <i class="fa-solid fa-play"></i>
                    <span class="video-duration">2:34</span>
                  </div>
                  <div class="video-item">
                    <img src="https://images.unsplash.com/photo-1578500494198-246f612d3b3d?w=400" alt="video">
                    <i class="fa-solid fa-play"></i>
                    <span class="video-duration">1:47</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Reviews -->
            <div class="reviews-section">
              <div class="reviews-header">
                <span class="reviews-title">Customer Reviews</span>
                <span>★ ${(product.rating || 4.5).toFixed(1)} · 128 reviews</span>
              </div>
              <div class="reviews-grid">
                ${reviews.slice(0, 4).map(r => `
                  <div class="review-card">
                    <div class="reviewer">
                      <div class="reviewer-avatar">${r.avatar}</div>
                      <div class="reviewer-info">
                        <h5>${r.name}</h5>
                        <span>${r.city} · ${r.time}h ago</span>
                      </div>
                    </div>
                    <div class="review-rating">
                      ${'★'.repeat(Math.floor(r.rating))}${r.rating % 1 ? '½' : ''}
                    </div>
                    <div class="review-text">"${r.comment}"</div>
                    <div class="review-helpful">
                      <span><i class="fa-regular fa-thumbs-up"></i> ${r.helpful}</span>
                      <span><i class="fa-regular fa-comment"></i> Reply</span>
                    </div>
                  </div>
                `).join('')}
              </div>
              <div class="view-all">View all 128 reviews →</div>
            </div>
          </div>
        </div>
      `;
    }

    async function loadRelated(product) {
      try {
        const snap = await db.collection('products')
          .where('category', '==', product.category)
          .limit(5)
          .get();
        
        const related = snap.docs
          .map(d => ({ id: d.id, ...d.data() }))
          .filter(p => p.id !== product.id)
          .slice(0, 4);

        if (related.length === 0) return;

        const html = `
          <div class="related">
            <h2 class="related-title">You may also like</h2>
            <div class="related-grid">
              ${related.map(p => `
                <a href="product.html?id=${p.id}" class="related-card">
                  <div class="related-image">
                    <img src="${p.media?.images?.[0]?.url || p.primaryImg || 'https://images.unsplash.com/photo-1578500494198-246f612d3b3d?w=200'}" alt="">
                  </div>
                  <div class="related-category">${p.category}</div>
                  <div class="related-name">${p.title.substring(0, 30)}</div>
                  <div class="related-price">₹${p.price.toFixed(2)}</div>
                  <div class="related-add" onclick="event.stopPropagation(); quickAdd('${p.id}')">
                    <i class="fa-solid fa-cart-plus"></i> Quick Add
                  </div>
                </a>
              `).join('')}
            </div>
          </div>
        `;
        
        document.getElementById('product-container').insertAdjacentHTML('beforeend', html);
      } catch (e) {
        console.error('Related error:', e);
      }
    }

    // Helper Functions
    function getStars(rating) {
      const r = parseFloat(rating) || 4.5;
      let stars = '';
      for (let i = 1; i <= 5; i++) {
        if (r >= i) stars += '<i class="fa-solid fa-star"></i>';
        else if (r > i-1 && r < i) stars += '<i class="fa-solid fa-star-half-alt"></i>';
        else stars += '<i class="fa-regular fa-star"></i>';
      }
      return stars;
    }

    window.changeImage = function(src, el) {
      document.getElementById('mainImage').src = src;
      document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
      el.classList.add('active');
    };

    window.updateQuantity = function(delta) {
      const input = document.getElementById('productQuantity');
      let val = parseInt(input.value) || 1;
      val += delta;
      if (val < 1) val = 1;
      input.value = val;
      
      if (currentProduct) {
        const total = currentProduct.price * val;
        updateDeliveryBar(total);
      }
    };

    function updateDeliveryBar(total) {
      const progress = document.getElementById('deliveryProgress');
      const message = document.getElementById('deliveryMessage');
      const text = document.getElementById('deliveryText');
      if (!progress || !message || !text) return;

      const percent = Math.min(100, (total / 1299) * 100);
      progress.style.width = percent + '%';

      if (total >= 1299) {
        message.className = 'delivery-message eligible';
        message.querySelector('i').className = 'fa-solid fa-circle-check';
        text.innerHTML = 'You get FREE delivery!';
      } else {
        message.className = 'delivery-message';
        message.querySelector('i').className = 'fa-solid fa-circle-info';
        text.innerHTML = `Add <span class="cart-value">₹${(1299 - total).toFixed(2)}</span> more`;
      }
    }

    // Share Functions
    window.toggleShare = function(e) {
      e.stopPropagation();
      const menu = document.getElementById('shareMenu');
      menu.classList.toggle('show');
      if (menu.classList.contains('show')) {
        setTimeout(() => document.addEventListener('click', closeShare), 100);
      }
    };

    function closeShare(e) {
      const menu = document.getElementById('shareMenu');
      const btn = document.querySelector('.share-btn');
      if (!menu.contains(e.target) && !btn.contains(e.target)) {
        menu.classList.remove('show');
        document.removeEventListener('click', closeShare);
      }
    }

    window.share = function(platform) {
      const url = encodeURIComponent(window.location.href);
      const title = encodeURIComponent(currentProduct?.title || 'Product');
      let link = '';
      if (platform === 'facebook') link = `https://facebook.com/sharer/sharer.php?u=${url}`;
      if (platform === 'twitter') link = `https://twitter.com/intent/tweet?text=${title}&url=${url}`;
      if (platform === 'whatsapp') link = `https://wa.me/?text=${title}%20${url}`;
      if (platform === 'telegram') link = `https://t.me/share/url?url=${url}&text=${title}`;
      if (platform === 'email') link = `mailto:?subject=${title}&body=${url}`;
      if (platform === 'pinterest') link = `https://pinterest.com/pin/create/button/?url=${url}&description=${title}`;
      if (link) window.open(link, '_blank', 'width=600,height=400');
      document.getElementById('shareMenu').classList.remove('show');
    };

    window.copyLink = function() {
      const input = document.getElementById('shareLink');
      input.select();
      navigator.clipboard.writeText(input.value).then(() => {
        const btn = document.querySelector('.copy-btn');
        btn.textContent = 'Copied!';
        setTimeout(() => {
          btn.textContent = 'Copy';
        }, 2000);
      });
    };

    // Cart Functions
    window.addToCart = function() {
      showNotification('Product added to cart!');
      
      const btn = event?.target?.closest('button');
      if (btn && btn.classList.contains('btn-secondary')) {
        const original = btn.innerHTML;
        btn.innerHTML = '<i class="fa-solid fa-check"></i> Added!';
        btn.style.background = 'var(--secondary)';
        btn.style.color = 'white';
        setTimeout(() => {
          btn.innerHTML = original;
          btn.style.background = '';
          btn.style.color = '';
        }, 1500);
      }
    };

    window.buyNow = function() {
      addToCart();
      setTimeout(() => {
        window.location.href = 'checkout.html';
      }, 500);
    };

    window.quickAdd = function(id) {
      showNotification('Quick add - coming soon!');
    };

    function showNotification(msg) {
      const notif = document.createElement('div');
      notif.className = 'notification';
      notif.innerHTML = `<i class="fa-solid fa-check-circle"></i> ${msg}`;
      document.body.appendChild(notif);
      setTimeout(() => notif.remove(), 3000);
    }

    // Tabs
    window.switchTab = function(tab) {
      document.querySelectorAll('.tab-header').forEach(h => h.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      document.querySelector(`.tab-header[onclick="switchTab('${tab}')"]`).classList.add('active');
      document.getElementById(`tab-${tab}`).classList.add('active');
    };

    // Initialize
    document.addEventListener('DOMContentLoaded', loadProduct);
  </script>
</body>
</html>
